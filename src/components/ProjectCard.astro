---
import Badge from './Badge.astro';
import type { Language } from '../i18n/translations';
import { getLocalizedPath } from '../i18n/translations';

interface Props {
  title: string;
  displayTitle: string;
  titleColor: string;
  client: string;
  description: string;
  badges: string[];
  slug: string;
  image?: string;
  passwordProtected?: boolean;
  comingSoon?: boolean;
  lang?: Language;
}

const {
  title,
  displayTitle,
  titleColor,
  client,
  description,
  badges,
  slug,
  image,
  passwordProtected = false,
  comingSoon = false,
  lang = 'en',
} = Astro.props;

const href = comingSoon ? '#' : getLocalizedPath(`/${slug}`, lang);
---

<a
  href={href}
  class="card group relative block cursor-pointer"
  data-coming-soon={comingSoon ? 'true' : undefined}
>
  <!-- Image/Title Area -->
  <div class="aspect-[4/3] overflow-hidden bg-[#1a1a1a] relative flex items-center justify-center">
    {image ? (
      <img
        src={image}
        alt={title}
        class="w-full h-full object-contain transition-transform duration-300 group-hover:scale-110"
      />
    ) : (
      <div class="text-center p-8">
        <h3
          class="font-druk mb-2"
          style={`color: ${titleColor}; font-size: clamp(1.5rem, 4vw, 2.5rem); line-height: 1.1;`}
        >
          {displayTitle}
        </h3>
        <p class="font-seravek text-sm text-muted-foreground">{client}</p>
      </div>
    )}
  </div>

  <!-- Content -->
  <div class="p-6">
    <!-- Badges -->
    <div class="flex flex-wrap gap-2 mb-4">
      {badges.map((badge) => (
        <Badge variant={badge === 'Soon' ? 'soon' : 'gradient'}>
          {badge}
        </Badge>
      ))}
    </div>

    <h4 class="font-proxima text-lg mb-2">{title}</h4>
    <p class="font-seravek text-sm text-muted-foreground mb-3">{client}</p>
    <p class="font-seravek text-[16px] text-[#ffffff]">{description}</p>
  </div>
</a>

<script>
  // Handle coming soon clicks
  document.querySelectorAll('[data-coming-soon="true"]').forEach((card) => {
    card.addEventListener('click', (e) => {
      e.preventDefault();
      alert('This project case study is currently being prepared and will be available soon. Thank you for your patience!');
    });
  });
</script>
